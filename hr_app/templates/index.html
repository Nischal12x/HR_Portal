{% extends "main1.html" %}
{% load static %}

{% block title %}AdminLTE3 | Dashboard{% endblock %}

{% block content %}
   {% if messages %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        {% for message in messages %}
            Swal.fire({
                title: "{% if message.tags == 'success' %}Success{% else %}Error{% endif %}",
                text: "{{ message }}",
                icon: "{% if message.tags == 'success' %}success{% else %}error{% endif %}",
                confirmButtonText: "OK"
            });
        {% endfor %}
    });
</script>
{% endif %}

<div class="wrapper">
  <div class="preloader flex-column justify-content-center align-items-center">
    <img class="animation__shake" src="{% static 'img/logo.webp' %}" alt="AdminLTELogo" height="140" width="140">
  </div>

  {% include 'navbar.html' %}
  {% include 'sidebar.html' %}

  <div class="content-wrapper">
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">Dashboard <small class="text-muted">{{ current_date }}</small></h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Dashboard</li>
            </ol>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="dashboard-container">
  <div class="dashboard-cards">
    <!-- Card: Total Employees -->
    {% if request.session.role != "Employee" %}
    <a href="{% url 'employees' %}" class="text-decoration-none text-dark">
    <div class="card-box">
      <div class="icon-box bg-blue"><i class="fas fa-users"></i></div>
      <div class="info">
        <div class="label">Total Employees</div>
        <div class="count" data-count="{{total_employees}}">{{total_employees}}</div>
      </div>
    </div>
    </a>
    {% endif %}
    <!-- Card: Total Projects -->
    <a href="{% url 'widgets' %}" class="text-decoration-none text-dark">
    <div class="card-box">
      <div class="icon-box bg-green"><i class="fas fa-folder-open"></i></div>
      <div class="info">
        <div class="label">Total Projects</div>
        <div class="count" data-count="{{total_projects}}">{{total_projects}}</div>
      </div>
    </div>
    </a>
      <div class="card-box">
      <div class="icon-box bg-yellow"><i class="fas fa-tasks"></i></div>
      <div class="info">
        <div class="label">Ongoing Tasks</div>
        <div class="count" data-count="{{ongoing_tasks}}">{{ongoing_tasks}}</div>
      </div>
    </div>

    <!-- Card: Ongoing Tasks -->
    <a href="{% url 'task_list' %}" class="text-decoration-none text-dark">
    <div class="card-box">
      <div class="icon-box bg-blue"><i class="fas fa-tasks"></i></div>
      <div class="info">
        <div class="label">Total Tasks</div>
        <div class="count" data-count="{{total_task}}">{{total_task}}</div>
      </div>
    </div>
    <!-- Card: Total Leave -->
    <a href="{% url 'index2' %}" class="text-decoration-none text-dark">
    <div class="card-box">
      <div class="icon-box bg-gray"><i class="fas fa-calendar-check"></i></div>
      <div class="info">
        <div class="label">Total Leave</div>
        <div class="count" data-count="{{total_leaves}}">{{total_leaves}}</div>
      </div>
    </div>
    </a>
    <!-- Card: Availed Leaves -->
      <a href="{% url 'leave_dashboard' %}" class="text-decoration-none text-dark">
    <div class="card-box">
      <div class="icon-box bg-red"><i class="fas fa-clock"></i></div>
      <div class="info">
        <div class="label">Availed Leaves</div>
        <div class="count" data-count="{{availed_leaves}}">{{availed_leaves}}</div>
      </div>
    </div>
      </a>
    <!-- Card: Remaining Leave -->
      <a href="{% url 'index2' %}" class="text-decoration-none text-dark">
    <div class="card-box">
      <div class="icon-box bg-teal"><i class="fas fa-umbrella-beach"></i></div>
      <div class="info">
        <div class="label">Remaining Leave</div>
        <div class="count" data-count="{{remaining_leaves}}">{{remaining_leaves}}</div>
      </div>
    </div>
      </a>
    <a href="{% url 'holiday_dashboard' %}" class="text-decoration-none text-dark">
  <div class="card-box">
    <div class="icon-box bg-red">
      <i class="fas fa-calendar-day"></i>
    </div>
    <div class="info">
      <div class="label">Total Holidays</div>
      <div class="count" data-count="{{ total_holidays }}">{{ total_holidays }}</div>
    </div>
  </div>
</a>

  </div>
</div>

    </div>
  </div>
  {% include 'footer.html' %}
</div>
{% endblock %}
